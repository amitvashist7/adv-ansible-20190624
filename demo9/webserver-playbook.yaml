---

- hosts: web

  vars: 
    http_doc: "/var/www/html"
    name: "Amit Vashist"
  
  tasks:
  - name: Install Apache Packages on Ubuntu
    apt: name=apache2 state=present
    when: ansible_os_family == "Debian"

  - name: Start the Apache Service on Ubuntu
    service: name=apache2 state=started 
    when: ansible_os_family == "Debian"
  
  - name: Install Apache Packages on Redhat
    yum: name=httpd state=present
    when: ansible_os_family == "RedHat"

  - name: Start the Apache Service on Redhat
    service: name=httpd state=started 
    when: ansible_os_family == "RedHat"

  - name: Deploy Static WebPage. 
    copy: src=files/index.html dest={{http_doc}}/index.html

  - name: Deploy Dynamic WebPage. 
    template: src=templates/info.j2 dest={{http_doc}}/info.html

- hosts: db
  tasks:
  - name: Install Databases Packages
    apt: name=mariadb-server state=present

  - name: Start the Database Service
    service: name=mysql state=started 
